function createCookie(a, b) { document.cookie = a + "=" + b + "; path=/" } function readCookie(a) { for (var b = a + "=", c = document.cookie.split(";"), d = 0; d < c.length; d++) { for (var e = c[d]; " " == e.charAt(0) ;) e = e.substring(1, e.length); if (0 == e.indexOf(b)) return e.substring(b.length, e.length) } return null } function eraseCookie(a) { createCookie(a, "") } function getTimeZone() { return jstz.determine().name() } function makeDirectlineCall() { var a = readCookie("conversationId"); botConnection = new BotChat.DirectLine(null == a || "undefined" == a ? { secret: params.s, token: params.t, domain: params.domain, pollingInterval: 2e3, webSocket: !1 } : { secret: params.s, token: params.t, domain: params.domain, pollingInterval: 2e3, webSocket: !1, conversationId: a }), botConnection.connectionStatus$.subscribe(function () { var b = botConnection.conversationId; createCookie("conversationId", b), createCookie("askAvnetUser", userid) }), BotChat.App({ botConnection: botConnection, user: user, bot: bot, updatePollingCallback: function (a) { $("#openChatBox").on("click", function () { a(2e3) }), $(document).on("click", ".closeChatbox", function () { a(2e4) }) } }, document.getElementById("BotChatGoesHere")), $(".wc-chatview-panel").on("click", ".closeChatbox", function () { closeChatBox() }), directlineCallFlag = !1 } function sendContextData() { botConnection.postActivity({ type: "event", value: { cookie: sourceCookie, storeId: params.storeId, langId: params.langId, site: params.site, regionId: params.regionId, userLogonId: userid, pageName: pageDetails.get("pageName"), searchTerm: pageDetails.get("searchTerm"), categoryId: pageDetails.get("categoryId"), categoryName: pageDetails.get("categoryName"), catentryId: pageDetails.get("catentryId"), partNumber: pageDetails.get("partNumber"), userName: userFirstName, currentUserType: currUserType, browserUserAgent: pageDetails.get("browserUserAgent"), currentPageURL: pageDetails.get("currentPageURL"), refURL: pageDetails.get("refURL"), screenResolution: pageDetails.get("screenResolution"), userTimeZone: getTimeZone(), botErrorEvent: pageDetails.get("botEvent"), proactivePrompt: pageDetails.get("proactivePrompt"), IPAddress: clientIPAddress, companyName: params.companyName }, from: user, name: "hostContexData" }).subscribe(function () { return console.log("Success --> userId = " + userid) }) } function openChatBox() { if ($(".intro-prompt").stop().removeClass("intro-animation").delay(400).queue(function () { $(".intro-prompt").hide().dequeue() }), $(".chatIconContainer").stop().addClass("chatIcon-anim"), "block" == $("#BotChatGoesHere").css("display")) $(".wc-chatview-panel").stop().removeClass("window-anim"), setTimeout(function () { $("#BotChatGoesHere").hide(), window.parent.postMessage({ CloseChat: "*" }, "*"), eraseCookie("botwindowstatus") }, 300); else { setTimeout(function () { $("#BotChatGoesHere").show(function () { $(".wc-chatview-panel").addClass("window-anim"), window.parent.postMessage({ OpenChat: "*" }, "*"), createCookie("botwindowstatus", "open") }) }, 300); var a = $(".wc-message-group-content")[0]; $(".wc-message-groups").animate({ scrollTop: a.scrollHeight }, 1) } } function closeChatBox() { $(".wc-chatview-panel").stop().removeClass("window-anim"), setTimeout(function () { $("#BotChatGoesHere").hide(), window.parent.postMessage({ CloseChat: "*" }, "*"), eraseCookie("botwindowstatus"), $(".chatIconContainer").stop().removeClass("chatIcon-anim") }, 500) } function getBrowser() { var a = window.navigator.userAgent.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i), b = ""; return b = window.navigator.userAgent.match(/Edge/i) || window.navigator.userAgent.match(/Trident.*rv[ :]*11\./i) ? "msie" : a[1].toLowerCase() } function manageIntroAlert() { var a = $("#introText").html(); readCookie("introContent") === a ? ($(".intro-prompt").hide(), window.parent.postMessage({ CloseChat: "*" }, "*")) : (createCookie("introContent", a), Number(readCookie("introPromptCount")) > 1 && "Hi! I'm Ask Avnet. Let me know if I can help you with anything." === a ? ($(".intro-prompt").hide(), window.parent.postMessage({ CloseChat: "*" }, "*")) : (window.parent.postMessage({ introalert: 180 }, "*"), $(".intro-prompt").show(function () { $(".intro-prompt").addClass("intro-animation"), setTimeout(function () { var a = 0, b = document.getElementsByClassName("intro-prompt")[0]; void 0 != b && null != b && (a = b.offsetHeight), window.parent.postMessage({ introalert: a }, "*") }), setTimeout(function () { $(".intro-prompt").removeClass("intro-animation").delay(400).queue(function () { $(".intro-prompt").hide().dequeue() }) }, 5e3) }))) } var params = BotChat.queryParams(location.search), directlineCallFlag = !0, userid, currUserType = "G", userFirstName = params.userFirstName, botConnection, sourceCookie = document.cookie, clientIPAddress = 0, pageDetails = new Map, user = { id: "userid", name: "username" }, bot = { id: params.botid || "botid", name: params.botname || "botname" }; if (window.botchatDebug = params.debug, void 0 != params.site && (userid = params.userId), "guestUser" != userid) { var userJson = { userid: userid }; $.ajax({ type: "POST", data: JSON.stringify(userJson), url: "/api/userdocument", contentType: "application/json", async: !1 }).done(function (a) { currUserType = "NEW USER" === a ? "G" : "R" }) } else currUserType = "G"; "avnet" == params.site.toLowerCase() && window.addEventListener("message", function (a) { if (a.data.hasOwnProperty("cookieValue")) { { readCookie("askAvnetUser") } sourceCookie = a.data.cookieValue, 2 == sourceCookie.split("AVN_IpAddress=").length && (clientIPAddress = sourceCookie.split("AVN_IpAddress=")[1].split(";")[0]) } if (a.data.hasOwnProperty("botEvent")) { var c = a.data.botEvent; "Error" == c.eventType && "Y" != params.disablePrompt ? (pageDetails.set("botEvent", "true"), document.getElementById("introText").innerHTML = "I see there\u2019s an error on this page. Can I help?", pageDetails.set("proactivePrompt", "error"), manageIntroAlert()) : "UserInactive" == c.eventType && "Y" != params.disablePrompt && (pageDetails.set("botEvent", "true"), document.getElementById("introText").innerHTML = "You\u2019ve been inactive for a little while. Is there anything I can help you with?", pageDetails.set("proactivePrompt", "userinactive"), manageIntroAlert()) } if (a.data.hasOwnProperty("pageInfo")) { var d = a.data.pageInfo; pageDetails.set("pageName", d.pageName), pageDetails.set("searchTerm", d.searchTerm), pageDetails.set("categoryId", d.categoryId), pageDetails.set("categoryName", d.categoryName), pageDetails.set("catentryId", d.catentryId), pageDetails.set("partNumber", d.partNumber), pageDetails.set("browserUserAgent", d.browserUserAgent), pageDetails.set("currentPageURL", d.currentPageURL), pageDetails.set("refURL", d.refURL), pageDetails.set("screenResolution", d.screenResolution) } if ("Product Display page" == pageDetails.get("pageName") && "Y" != params.disablePrompt) { var e = pageDetails.get("partNumber"), f = { params: "query=" + e + "&hitsPerPage=9&attributesToRetrieve=[id,hid,name,pitch,url,cover_image_url,comments_count,impressions_count,respects_count,published_at" }; $.ajax({ type: "POST", data: JSON.stringify(f), url: "https://7yqjt9bhux-dsn.algolia.net/1/indexes/hackster_production_base_article/query?x-algolia-agent=Algolia%20for%20vanilla%20JavaScript%203.12.0&x-algolia-application-id=7YQJT9BHUX&x-algolia-api-key=c113f0569e873258342405ddf4a4dd09", contentType: "application/json", async: !1 }).done(function (a) { a.hits.length > 0 ? (document.getElementById("introText").innerHTML = "I\u2019ve found some projects using " + e + " on Hackster. Let me know if you\u2019d like to check them out!", pageDetails.set("proactivePrompt", "project")) : $.ajax({ type: "GET", url: "https://www.element14.com/community/api/core/v3/search/contents?origin=searchpage&collapse=true&depth=none&socialSearch=true&returnScore=true&fields=type,subject,highlightBody,replyCount,likeCount,viewCount,published&directive=include_rtc&filter=search(" + e + ")", dataType: "JSON", success: function (a) { a.list.length > 0 && (document.getElementById("introText").innerHTML = "I\u2019ve found some articles on " + e + " on element14. Let me know if you\u2019d like to check them out!", pageDetails.set("proactivePrompt", "article")) } }) }) } }), window.onload = function () { "safari" === getBrowser() && $(".intro-prompt").css({ visibility: "hidden" }), $(".intro-main").addClass(params.site); var a = "for", b = "", c = "", d = "", e = "<svg xmlns='http://www.w3.org/2000/svg' width='25px' height='25px' viewBox='0 0 25 25' version='1.1'><path fill='#fff' fill-rule='evenodd' d='M12.219 11.455H10.98h-.001a.25.25 0 0 1-.249-.251l.01-1.57a.125.125 0 0 0-.16-.12l-5.434 1.532a.202.202 0 0 0-.146.216.154.154 0 0 0 .153.17h2.697a.25.25 0 0 1 .25.25v1.644c0 .138.111.25.25.25l4.43.017v-.003H14.02a.25.25 0 0 1 .249.252l-.01 1.57a.125.125 0 0 0 .16.12L19.853 14a.202.202 0 0 0 .146-.216.154.154 0 0 0-.153-.17h-2.697a.25.25 0 0 1-.25-.25V11.72a.25.25 0 0 0-.25-.25l-4.43-.016v.002zM12.5 25C5.596 25 0 19.404 0 12.5S5.596 0 12.5 0 25 5.596 25 12.5 19.404 25 12.5 25zm1.89-18.365a.25.25 0 0 0-.18.24v3.42c0 .138.111.25.25.25h2.14a.25.25 0 0 0 .25-.25V6.25a.25.25 0 0 0-.32-.24l-2.14.625zM8.206 8.329a.25.25 0 0 0-.18.24v.227c0 .138.112.25.25.25h2.14a.25.25 0 0 0 .25-.25v-.851a.25.25 0 0 0-.32-.24l-2.14.624zm8.462 8.34a.25.25 0 0 0 .18-.241v-.227a.25.25 0 0 0-.25-.25h-2.14a.25.25 0 0 0-.25.25v.852a.25.25 0 0 0 .32.24l2.14-.625zm-6.117 1.629a.25.25 0 0 0 .18-.24v-3.42a.25.25 0 0 0-.25-.251h-2.14a.25.25 0 0 0-.25.25v4.045a.25.25 0 0 0 .32.24l2.14-.624z'/></svg>"; if (supportSvg = "<svg xmlns='http://www.w3.org/2000/svg' width='18px' height='18px' viewBox='0 0 22 22' version='1.1'><g stroke='none' strokeWidth='1' fill='none' fillRule='evenodd'><g transform='translate(-263.000000, -18.000000)'><g><g transform='translate(264.000000, 19.000000)'><path d='M7.09,7 C7.57543688,5.62004444 8.98538362,4.79140632 10.4271763,5.0387121 C11.868969,5.28601788 12.9221794,6.53715293 12.92,8 C12.92,10 9.92,11 9.92,11' id='iconSupport' stroke='#FFFFFF' strokeWidth='2' strokeLinecap='round' strokeLinejoin='round' /><circle id='Oval-2' fill='#FFFFFF' cx='10' cy='15' r='1' /><circle id='Oval' stroke='#FFFFFF' strokeWidth='2' strokeLinecap='round' strokeLinejoin='round' cx='10' cy='10' r='10' /></g></g></g></g></svg>", void 0 != params.site && "avnet" == params.site.toLowerCase() ? (a = "", e = "", supportSvg = "", c = "#41C363") : void 0 != params.site && "hackster" == params.site.toLowerCase() ? (b = "hackster.io", c = "#218DDB", d = "Ask Avnet brings you the combined knowledge of the entire Avnet ecosystem, including Hackster, element14 and avnet.com.") : void 0 != params.site && "element14" == params.site.toLowerCase() && (e = "", b = "element14", c = "#007FAC", d = "Ask Avnet brings you the combined knowledge of the entire Avnet ecosystem, including element14, Hackster and avnet.com."), $("use#iconColor").attr({ fill: c }), $(".header-for").html(a), $(".header-site-icon").html(e), $(".header-site").html(b), $(".header-support-icon").html(supportSvg), $(".intro-support-tooltip-text").html(d), $(".header-support-icon").mouseenter(function () { $(".intro-support-tooltip").fadeIn() }), $(".header-support-icon").mouseleave(function () { $(".intro-support-tooltip").fadeOut() }), void 0 != readCookie("introPromptCount") ? createCookie("introPromptCount", Number(readCookie("introPromptCount")) + 1) : createCookie("introPromptCount", 1), "element14" == params.site.toLowerCase() && ("102" == params.contentTypeID && "DesignCenter" == params.siteSection || "582441006" == params.contentTypeID || "293607990" == params.contentTypeID)) { var f = params.e14SKU.split(","); document.getElementById("introText").innerHTML = "Hi! Looks like you\u2019re interested in this product. Would you like to learn more about it?", pageDetails.set("proactivePrompt", "element14"), pageDetails.set("partNumber", f[0]) } }, $(document).ready(function () { eraseCookie("botwindowstatus"), manageIntroAlert(), $("#openChatBox").on("click", function () { "block" === $(".openContainer").css("display") ? (directlineCallFlag && makeDirectlineCall(), sendContextData(), openChatBox()) : "block" === $(".closeContainer").css("display") && closeChatBox() }), $(".intro-prompt").on("click", "#intro-openchat", function () { directlineCallFlag && makeDirectlineCall(), sendContextData(), openChatBox() }), $(".intro-prompt").on("click", ".intro-close", function () { $(".intro-prompt").removeClass("intro-animation").delay(400).queue(function () { $(".intro-prompt").hide().dequeue() }), window.parent.postMessage({ CloseChat: "*" }, "*") }) });